# openCompass 司南评测

## 一. 笔记

### 1. 为什么要做评测？

1. 可以通过评测——测试——知道LLM各自的优缺点——促进LLM发展：所以需要不断地扩展评测维度、如数学、逻辑、代码、智能体等
2. 针对于垂直领域，需要有专业的知识才能应用到这些模型
   1. 比如医疗、金融、法律等
   2. 需要更专向的评估
3. 高质量中文基准
   1. 为了促进中文社区LLM的发展
   2. 针对中文场景进行评测
4. 反哺能力迭代
   1. 其实和第一点差不多，就是通过评测发现不足，发展不足

### 2. 大模型评测的挑战

1. 评测能力还不足够全面
   1. 大模型场景太多了，也不断延伸出新的场景，每种场景都得评测。但目前还做不到每个场景都能评测好
   2. 大模型自己能力演进也太快了
   3. <u>对于可扩展的能力维度体系的建设</u>，是下一步要好好做的
2. 评测成本还是比较高
   1. 客观答题时，推理成本需要很多GPU资源
   2. 主观评测时，需要调用API接口，需要额外付费
   3. 人工打分成本也很高
3. 数据污染问题
   1. LLM如果在评测集上做训练，得分会比较高，但不符合实际了，不可信了。
   2. 所以<u>需要一种数据污染的检测技术</u>，在评测中要有体现。
   3. 如果受到了污染，应该收到提示
4. 鲁棒性
   1. 大模型对提示词很敏感
   2. 多次采样情况下模型性能不稳定

### 3. OC2.0司南大模型

1. 20240130，发布了2.0模型
2. 社区支持最完善的评测体系之一  
   1. 100+评测集  
   2. 50万+题目
   3. 覆盖学科、语言、知识、理解和推理

### 4. 司南如何评测大模型

1. 根据大模型类型的不同去分别评测
   1. foundation模型
      1. 未经过微调
      2. 很多模型都是从基座模型训练过来的
      3. 需要设计一些方法去如何评测基座模型
   2. 对话模型
      1. 类似于通义千问等开源模型
   3. API模型
   4. 公开权重的开源模型
2. 评测题型设计
   1. 客观评测：基于智能表达式，把模型的这个回答提取出来一个选项（建立固定答案），看有没有答对
      1. 问答题
      2. 选择题
   2. 主观评测——开放式
      1. 打分，直接打分模式的规则
      2. 直接说A比B好的这类规则
3. prompt engineer
   1. opencompass会自己把题目更丰富一些——给模型做推理——做测评——结果更真实的反映模型新功能![image](https://github.com/bubblefu/InternLM_Camp_md/assets/70378994/bc68b63e-502e-4045-8163-078397f93dc1)
4. 小样本学习
5. 思维链技术
6. 长文本评测（能够让模型大海捞针）
   1. input：在很长很长的这样一个文档里面，在某一个位置突然插入一个就是不相关的一句话，比如说小明在上海人工智能实验室学习机给它插到红楼梦里面，然后你让模型读完了这本书之后，然后你再问小明在哪里实习？
   2. 分析：指令跟随能力  |  长文本建模能力  | 信息抽取能力
   3. output：上海人工智能实验室
   4. 结果：如果模型如果能回答出来，那就证明他的这个长文本能力很好
7. 汇集社区力量
   1. 工具——基准——榜单  三位一体
   2. compassHub : 提供高时效性高质量评测集
   3. compassRank：发布权威榜单 、洞悉行业趋势
   4. compassKit ：全栈测评工具，支持高效评测和能力分析
   5. 以上三个互相循环：hub -> rank -> kit -> hub
   6. 已经有100+大模型加入了司南的评测
   7. 还有多模态的榜单

### 5. compassKit：全栈工具链

1. 基本功能：
   1. 数据污染检查
   2. 长文本能力
   3. 更丰富的模型推理接入
      1. 评测的时候用 hugging face 的这个模型，它可能评测的速度比较慢
      2. 直接支持去更换推理模型后端：比如LMdeploy
      3. 更换了这些后完之后你的模型推理速度就会变得非常快
   4. 中英文双语主观评测![image](https://github.com/bubblefu/InternLM_Camp_md/assets/70378994/caa08d98-370a-4731-8474-469d9b35d4e5)

2. 评测流水线：![image](https://github.com/bubblefu/InternLM_Camp_md/assets/70378994/b1cf2d69-f296-466c-b0cb-c0ec24c1dd82)



## 二. 实战
